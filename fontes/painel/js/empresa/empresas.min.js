$(document).ready(function(){reloadtable();reloadtable()});function formatacnpj(){var a=$("#cnpj");a.val(a.val().replace(/\D/g,"").replace(/^(\d{2})(\d{3})?(\d{3})?(\d{4})?(\d{2})?/,"$1.$2.$3/$4-$5"))}function reloadtable(){$("#divcat").load("ajax/empresa/tab_empresas.php",function(){})}function openModal(g,m){var i=$("#modal");var e=$("#titulomodal");var o=$("#campoguid");var f=$("#botaoatualizar");var k=$("#botaosalvar");var p=$("#guid");var b=$("#nome");var l=$("#cnpj");var j=$("#inscestd");var c=$("#telefone");var h=$("#email");var n=$("#endreco");var a=$("#padrao");var d=$("#selectedOption");if(g=="Novo"){e.html("Cadastro de Empresa");d.hide();o.hide();k.show();f.hide();$("#formEmpresas")[0].reset();i.modal("show")}else{if(g=="editar"){$.ajax({url:"ajax/empresa/populate_empresa.php",type:"POST",data:"guid="+m,success:function(q){$.each(q,function(y){var t=q[y].guid;var s=q[y].nome;var x=q[y].cnpj;var u=q[y].inscricaoestd;var v=q[y].telefone;var z=q[y].email;var w=q[y].endereco;var r=q[y].padrao;var A=0;$("#formEmpresas")[0].reset();if(r==1){A="Sim";$("#u1").hide()}else{if(r==2){A="Não";$("#u2").hide()}}d.show();d.html(A);d.val(r);p.val(t);b.val(s);l.val(x);j.val(u);c.val(v);h.val(z);n.val(w);a.val(r)});e.html("Atualizando Empresa "+(b.val()));o.hide();k.hide();f.show();i.modal("show")}})}}}function salvar(f,j){var c=$("#nome").val();var i=$("#cnpj").val();var h=$("#inscestd").val();var d=$("#telefone").val();var g=$("#email").val();var l=$("#endreco").val();var a=$("#padrao").val();var e=$("#selectedOption").val();var k=$("#guid").val();toastr.options={closeButton:true,debug:false,newestOnTop:false,progressBar:true,positionClass:"toast-top-right",preventDuplicates:false,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};if(c.length<1){toastr.warning("O Campo Nome da Empresa não pode ficar em branco","Atenção");$("#nome").focus()}else{if(a.length<1){toastr.warning("O Campo Padrão não pode ficar em branco","Atenção");$("#padrao").focus()}else{if(f==3){var b=confirm("Deseja deletar ?");if(b==true){$.ajax({url:"ajax/empresa/empresa.php",type:"POST",data:"guid="+j+"&operacao="+f,success:function(m){$("#modal").modal("hide");if(m==1){toastr.success("Registro Deletado com Sucesso","OK");reloadtable()}}})}}else{$.ajax({url:"ajax/empresa/empresa.php",type:"POST",data:"nome="+c+"&cnpj="+i+"&insc="+h+"&telefone="+d+"&email="+g+"&endereco="+l+"&padrao="+a+"&guid="+j+"&operacao="+f+"&guidupdate="+k,success:function(m){if(m==4){toastr.warning("Já Existe uma Empresa Padrão cadastrada, Não é permitido ter duas empresas padrão","Atenção");$("#descricao").focus()}else{toastr.success("Registro Salvo com Sucesso","OK");$("#modal").modal("hide")}reloadtable()}})}}}}$(function(){$("#supported").text("Supported/allowed: "+!!screenfull.enabled);if(!screenfull.enabled){return false}$("#toggle").click(function(){screenfull.toggle($("#container")[0])})});